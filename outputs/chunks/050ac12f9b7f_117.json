{
  "content": "(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nsource \"$SCRIPT_DIR/config.sh\"\n\n# Colors\nGREEN='\\033[0;32m'\nRED='\\033[0;31m'\nCYAN='\\033[0;36m'\nNC='\\033[0m'\n\n# ───────────────────────────────────────────────────────────\n# 1. Find latest summary\n# ───────────────────────────────────────────────────────────\nfind_latest_summary() {\n  local latest\n  latest=$(ls -1t \"$SUMMARIES_DIR\"/summary_*.json 2>/dev/null | head -n1 || true)\n  if [[ -z \"$latest\" ]]; then\n    echo -e \"${RED}❌ No summary file found in $SUMMARIES_DIR${NC}\" >&2\n    exit 1\n  fi\n  echo \"$latest\"\n}\n\n# ───────────────────────────────────────────────────────────\n# 2. Prompt user for fields\n# ───────────────────────────────────────────────────────────\nprompt_input() {\n  local var_name=$1\n  local prompt_msg=$2\n  local default=$3\n  local input\n\n  read -rp \"$prompt_msg\" input\n  # If user just presses Enter and default exists, use it\n  if [[ -z \"$input\" && -n \"$default\" ]]; then\n    input=\"$default\"\n  fi\n  printf '%s' \"$input\"\n}\n\n# ───────────────────────────────────────────────────────────\n# 3. Generate the structured prompt\n# ───────────────────────────────────────────────────────────\ngenerate_prompt() {\n  local summary_file=$1\n  local title=$2\n  local question=$3\n  local notes=$4\n  local conclusion=$5\n\n  echo -e \"${CYAN}🛠 Generating prompt using summary:${NC} $summary_file\"\n\n  python3 \"$MCP_HELPER\" \\\n    --summaries-dir \"$SUMMARIES_DIR\" \\\n    --template-file \"$TEMPLATE\" \\\n    --output-dir \"$(dirname \"$PROMPT_OUT\")\" \\\n    --title \"$title\" \\\n    --var question=\"$question\" \\\n    --var notes=\"$notes\" \\\n    --var conclusion=\"$conclusion\"\n}\n\n# ───────────────────────────────────────────────────────────\n#             Main Script Execution\n# ───────────────────────────────────────────────────────────\n\nlatest_summary=$(find_latest_summary)\n\necho\ntitle=$(prompt_input TITLE \"Enter prompt title [default: Structured Review]: \" \"Structured Review\")\necho\nquestion=$(prompt_input QUESTION \"Enter your main question: \" \"\")\necho\nnotes=$(pr",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_140836.txt",
    "chunk_id": "050ac12f9b7f_117",
    "start_char": 210600,
    "end_char": 212600,
    "created_at": "2025-05-21T08:41:32+00:00"
  }
}