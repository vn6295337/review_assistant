{
  "content": "r = chunk_data.get('id', 'unknown')\n\n        lines = content.strip().splitlines()\n                preview = \"\\n\".join(lines[:20])            # first 20 lines\n                preview = preview.lstrip(\"{ \")            # strip leading { or  if present\n\n                plain_text_summary = (\n                    f\"### Chunk {chunk_id} — {os.path.basename(source_file)}\\\\n\\\\n\"\n                    f\"{preview}\\\\n\\\\n…\"\n                )\n\n        summary_data = {\n            \"source_file\": input_file,\n            \"summary\": plain_text_summary\n        }\n\n        with open(output_file, 'w', encoding='utf-8') as f:\n            json.dump(summary_data, f, indent=2)\n\n        print(f\"✓ Summary created: {output_file}\")\n        return True\n\n    except Exception as e:\n        print(f\"⚠ Error processing {input_file}: {e}\")\n        return False\n\n\ndef process_directory(input_dir, output_dir, verbose=False):\n    \"\"\"\n    Process all JSON files in a directory.\n\n    Args:\n        input_dir (str): Directory containing JSON chunk files\n        output_dir (str): Directory to save summary files\n        verbose (bool): Whether to print verbose output\n\n    Returns:\n        int: Number of successfully processed files\n    \"\"\"\n    if verbose:\n        print(f\"Processing directory: {input_dir}\")\n        print(f\"Output directory: {output_dir}\")\n\n    if not os.path.isdir(input_dir):\n        print(f\"⚠ Input directory does not exist: {input_dir}\")\n        return 0\n\n    os.makedirs(output_dir, exist_ok=True)\n    success_count = 0\n    file_count = 0\n\n    for filename in sorted(os.listdir(input_dir)):\n        if filename.endswith('.json'):\n            file_count += 1\n            input_file = os.path.join(input_dir, filename)\n            if summarize_chunk(input_file, output_dir):\n                success_count += 1\n\n    if verbose:\n        print(\"\\nSummary Generation Complete\")\n        print(f\"Processed {file_count} files\")\n        print(f\"Successfully summarized {success_count} files\")\n\n    return success_count",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_140836.txt",
    "chunk_id": "050ac12f9b7f_197",
    "start_char": 354600,
    "end_char": 356600,
    "created_at": "2025-05-21T08:41:33+00:00"
  }
}