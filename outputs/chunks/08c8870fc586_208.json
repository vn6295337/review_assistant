{
  "content": "ime(os.path.join(chunks_dir, f)) \n                           for f in os.listdir(chunks_dir) if f.endswith('.json')])\n        \n        if cache_mtime > chunks_latest:\n            # Cache is newer than the latest chunk\n            print(\"Using cached embeddings\")\n            with open(cache_file, 'rb') as f:\n                return pickle.load(f)\n    \n    # Compute embeddings\n    embeddings = compute_embeddings(chunks_dir)\n    \n    # Save to cache\n    with open(cache_file, 'wb') as f:\n        pickle.dump(embeddings, f)\n    \n    return embeddings\n\n\n### 9. Add Chat History Integration\n\nCreate a function to integrate chat history for easier follow-up:\n\npython\ndef extract_chat_insights(chat_file, output_file):\n    \"\"\"Extract key insights from an AI chat session\"\"\"\n    with open(chat_file, 'r') as f:\n        chat_text = f.read()\n    \n    # Find sections that look like insights or conclusions\n    import re\n    \n    # Look for sections like \"Key insights:\", \"In conclusion:\", etc.\n    insight_patterns = [\n        r\"(?:Key insights|Main findings|Key points|Important points|Conclusion|Summary):\\s*(.*?)(?:\\n\\n|\\Z)\",\n        r\"(?:•|\\*|\\d+\\.)\\s+(.*?)(?:\\n(?:•|\\*|\\d+\\.)|$)\"\n    ]\n    \n    insights = []\n    for pattern in insight_patterns:\n        matches = re.findall(pattern, chat_text, re.DOTALL | re.IGNORECASE)\n        insights.extend(matches)\n    \n    # Write insights to file\n    with open(output_file, 'w') as f:\n        f.write(\"# Extracted Insights\\n\\n\")\n        for idx, insight in enumerate(insights, 1):\n            f.write(f\"{idx}. {insight.strip()}\\n\\n\")\n    \n    return len(insights)\n\n\n### 10. Add Support for External Storage\n\nMake the system work with different USB paths for better portability:\n\nbash\n# Auto-detect USB drive\nfind_usb_drive() {\n  # Try common paths\n  for path in \"/mnt/chromeos/removable\" \"/media\" \"/mnt\"; do\n    if [ -d \"$path\" ]; then\n      # Look for directories that might be a USB drive\n      for dir in \"$path\"/*; do\n        if [ -d \"$dir\" ] && [ -w \"$dir\"",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_125041.txt",
    "chunk_id": "08c8870fc586_208",
    "start_char": 374400,
    "end_char": 376400,
    "created_at": "2025-05-21T07:21:41+00:00"
  }
}