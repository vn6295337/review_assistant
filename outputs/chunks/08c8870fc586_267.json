{
  "content": "mat_as_markdown(messages, title=\"Claude Chat Export\"):\n    \"\"\"Format messages as Markdown.\"\"\"\n    now = datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n    md_content = f\"# {title}\\n\\n\"\n    md_content += f\"*Exported on: {now}*\\n\\n\"\n    \n    for msg in messages:\n        role = msg[\"role\"].capitalize()\n        content = msg[\"content\"]\n        \n        # Format code blocks correctly\n        content = re.sub(r'\n(\\w*)\\n(.*?)\\n\n', r'\n\\1\\n\\2\\n\n', content, flags=re.DOTALL)\n        \n        md_content += f\"## {role}\\n\\n{content}\\n\\n\"\n        md_content += \"---\\n\\n\"  # Add separator between messages\n    \n    return md_content\n\ndef format_as_text(messages, title=\"Claude Chat Export\"):\n    \"\"\"Format messages as plain text.\"\"\"\n    now = datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n    text_content = f\"{title}\\n\"\n    text_content += f\"Exported on: {now}\\n\\n\"\n    \n    for msg in messages:\n        role = msg[\"role\"].capitalize()\n        content = msg[\"content\"]\n        \n        text_content += f\"{role}:\\n{content}\\n\\n\"\n        text_content += \"-\" * 80 + \"\\n\\n\"  # Add separator between messages\n    \n    return text_content\n\ndef save_chat(messages, output_format, output_dir, title=\"\"):\n    \"\"\"Save the chat in the specified format.\"\"\"\n    if not title:\n        title = \"Claude Chat Export\"\n    \n    safe_title = re.sub(r'[^\\w\\s-]', '', title).strip().replace(' ', '_')\n    timestamp = datetime.datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n    filename = f\"{safe_title}_{timestamp}\"\n    \n    # Create full filepath\n    if output_format == 'json':\n        filepath = os.path.join(output_dir, f\"{filename}.json\")\n        with open(filepath, 'w', encoding='utf-8') as f:\n            json.dump({\"title\": title, \"messages\": messages}, f, indent=2)\n    \n    elif output_format == 'md':\n        filepath = os.path.join(output_dir, f\"{filename}.md\")\n        with open(filepath, 'w', encoding='utf-8') as f:\n            f.write(format_as_markdown(messages, title))\n    \n    else:  # txt format\n    ",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_125041.txt",
    "chunk_id": "08c8870fc586_267",
    "start_char": 480600,
    "end_char": 482600,
    "created_at": "2025-05-21T07:21:41+00:00"
  }
}