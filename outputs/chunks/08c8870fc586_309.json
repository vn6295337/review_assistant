{
  "content": "\"{\"\n    echo \"  \\\"title\\\": \\\"$title\\\",\"\n    echo \"  \\\"messages\\\": [\"\n    awk '\n      function json_escape(str) {\n        gsub(/\\\\/,\"\\\\\\\\\",str)\n        gsub(/\"/,\"\\\\\\\"\",str)\n        return str\n      }\n      /^Human:/ {\n        sub(/^Human:[ ]*/, \"\")\n        printf \"    {\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"%s\\\"},\\n\", json_escape($0)\n      }\n      /^Claude:/ {\n        sub(/^Claude:[ ]*/, \"\")\n        printf \"    {\\\"role\\\": \\\"claude\\\", \\\"content\\\": \\\"%s\\\"},\\n\", json_escape($0)\n      }\n    ' \"$input_file\" | sed '$ s/,$//'\n    echo \"  ]\"\n    echo \"}\"\n  } > \"$output_file\"\n}\n\n# === Prompt yes/no question with validation ===\nprompt_yes_no() {\n  local prompt_msg=\"$1\"\n  while true; do\n    echo -n \"$prompt_msg (y/n): \"\n    read -r answer\n    case \"$answer\" in\n      [Yy]*) return 0 ;;\n      [Nn]*) return 1 ;;\n      *) echo -e \"${RED}Please answer y or n.${NC}\" ;;\n    esac\n  done\n}\n\n# === Process the chat export and optionally run RAG tools ===\nprocess_file() {\n  if [[ ! -f \"$TMP_FILE\" ]]; then\n    echo -e \"${RED}❌ Error: $TMP_FILE not found! Please save your chat to that file first.${NC}\"\n    exit 1\n  fi\n\n  echo \"Enter a title for this chat (or press Enter for default):\"\n  read -r CHAT_TITLE\n  CHAT_TITLE=${CHAT_TITLE:-\"Claude Chat Export\"}\n\n  FORMAT=$(prompt_export_format)\n\n  TIMESTAMP=$(date +\"%Y%m%d_%H%M%S\")\n  SAFE_TITLE=$(echo \"$CHAT_TITLE\" | tr -cd '[:alnum:] _-' | tr ' ' '_')\n  OUTPUT_FILE=\"$EXPORT_DIR/${SAFE_TITLE}_${TIMESTAMP}.$FORMAT\"\n\n  echo -e \"${CYAN}Processing chat export...${NC}\"\n  case \"$FORMAT\" in\n    md)\n      export_markdown \"$TMP_FILE\" \"$OUTPUT_FILE\" \"$CHAT_TITLE\"\n      ;;\n    json)\n      export_json \"$TMP_FILE\" \"$OUTPUT_FILE\" \"$CHAT_TITLE\"\n      ;;\n    txt)\n      {\n        echo \"$CHAT_TITLE\"\n        echo \"Exported on: $(date)\"\n        echo\n        cat \"$TMP_FILE\"\n      } > \"$OUTPUT_FILE\"\n      ;;\n  esac\n\n  echo -e \"${GREEN}✅ Chat exported to: $OUTPUT_FILE${NC}\"\n\n  if prompt_yes_no \"Do you want to process this file with your RAG tools?\"; then\n    echo -e \"${CYAN}",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_125041.txt",
    "chunk_id": "08c8870fc586_309",
    "start_char": 556200,
    "end_char": 558200,
    "created_at": "2025-05-21T07:21:42+00:00"
  }
}