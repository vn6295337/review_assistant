{
  "content": " --output-dir \"$CHUNKS_DIR\" \\\n        --chunk-size \"$chunk_size\" \\\n        --overlap \"$overlap\" \\\n        --verbose\n  else\n    echo -e \"${RED}No chunks – aborting workflow.${NC}\"\n    exit 0\n  fi\nfi\n\n# Re‑count after possible creation\nchunk_count=$(find \"$CHUNKS_DIR\" -type f -name \"*.json\" | wc -l)\necho -e \"${GREEN}✓ Found $chunk_count chunk files${NC}\"\n\n# ───────────────────────────────────────────────────────────\n# 6.  STEP 2 – Summaries\n# ───────────────────────────────────────────────────────────\necho -e \"\\n${BLUE}Step 2 • Generating summaries…${NC}\"\n\nsummary_count=$(find \"$SUMMARIES_DIR\" -type f -name \"summary_*.json\" | wc -l)\nif [[ \"$summary_count\" -gt 0 ]]; then\n  read -rp \"$(echo -e \"${BLUE}$summary_count summaries exist. Re‑generate all? (y/n) ${NC}\")\" regen\n  if [[ \"$regen\" =~ ^[Yy]$ ]]; then\n    echo -e \"${YELLOW}Deleting old summaries…${NC}\"\n    rm -f \"${SUMMARIES_DIR}\"/summary_*.json\n  fi\nfi\n\necho -e \"${GREEN}→ Running summariser…${NC}\"\npython3 \"${PYTHON_DIR}/file_summarizer.py\" \\\n    --input-dir \"$CHUNKS_DIR\" \\\n    --output-dir \"$SUMMARIES_DIR\" \\\n    --skip-existing \\\n    --verbose\n\n# ───────────────────────────────────────────────────────────\n# 7.  STEP 3 – Build master prompt\n# ───────────────────────────────────────────────────────────\necho -e \"\\n${BLUE}Step 3 • Building master prompt…${NC}\"\nread -rp \"$(echo -e \"${BLUE}Title for this review [enter for default]: ${NC}\")\" review_title\nreview_title=${review_title:-\"Content Analysis $(date +%Y-%m-%d)\"}\n\npython3 \"${PYTHON_DIR}/mcp_helper.py\" \\\n    --summaries-dir \"$SUMMARIES_DIR\" \\\n    --template-file \"$DEFAULT_TEMPLATE\" \\\n    --output-dir \"$PROMPTS_DIR\" \\\n    --title \"$review_title\"\n\n# ───────────────────────────────────────────────────────────\n# 8.  STEP 4 – Offer post‑prompt actions\n# ───────────────────────────────────────────────────────────\nlatest_prompt=$(find \"$PROMPTS_DIR\" -type f -name \"summary_prompt_*.txt\" -printf \"%T@ %p\\n\" \\\n                | sort -nr | head -1 | cut -d' ' -f2-)\n\nif [[ -n \"$",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_125041.txt",
    "chunk_id": "08c8870fc586_34",
    "start_char": 61200,
    "end_char": 63200,
    "created_at": "2025-05-21T07:21:39+00:00"
  }
}