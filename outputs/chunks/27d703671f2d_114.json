{
  "content": "se if ($0 ~ /^Claude:/) {\n        print \"## Claude\\n\"; $1=\"\"; print $0 \"\\n---\\n\";\n      } else {\n        print $0;\n      }\n    }' \"$input_file\"\n  } > \"$output_file\"\n}\n\n# === Export chat in JSON format (basic example) ===\nexport_json() {\n  local input_file=\"$1\"\n  local output_file=\"$2\"\n  local title=\"$3\"\n\n  # Basic JSON array of messages with role and content extracted from lines starting with \"Human:\" or \"Claude:\"\n  {\n    echo \"{\"\n    echo \"  \\\"title\\\": \\\"$title\\\",\"\n    echo \"  \\\"messages\\\": [\"\n    awk '\n      function json_escape(str) {\n        gsub(/\\\\/,\"\\\\\\\\\",str)\n        gsub(/\"/,\"\\\\\\\"\",str)\n        return str\n      }\n      /^Human:/ {\n        sub(/^Human:[ ]*/, \"\")\n        printf \"    {\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"%s\\\"},\\n\", json_escape($0)\n      }\n      /^Claude:/ {\n        sub(/^Claude:[ ]*/, \"\")\n        printf \"    {\\\"role\\\": \\\"claude\\\", \\\"content\\\": \\\"%s\\\"},\\n\", json_escape($0)\n      }\n    ' \"$input_file\" | sed '$ s/,$//'\n    echo \"  ]\"\n    echo \"}\"\n  } > \"$output_file\"\n}\n\n# === Prompt yes/no question with validation ===\nprompt_yes_no() {\n  local prompt_msg=\"$1\"\n  while true; do\n    echo -n \"$prompt_msg (y/n): \"\n    read -r answer\n    case \"$answer\" in\n      [Yy]*) return 0 ;;\n      [Nn]*) return 1 ;;\n      *) echo -e \"${RED}Please answer y or n.${NC}\" ;;\n    esac\n  done\n}\n\n# === Process the chat export and optionally run RAG tools ===\nprocess_file() {\n  if [[ ! -f \"$TMP_FILE\" ]]; then\n    echo -e \"${RED}‚ùå Error: $TMP_FILE not found! Please save your chat to that file first.${NC}\"\n    exit 1\n  fi\n\n  echo \"Enter a title for this chat (or press Enter for default):\"\n  read -r CHAT_TITLE\n  CHAT_TITLE=${CHAT_TITLE:-\"Claude Chat Export\"}\n\n  FORMAT=$(prompt_export_format)\n\n  TIMESTAMP=$(date +\"%Y%m%d_%H%M%S\")\n  SAFE_TITLE=$(echo \"$CHAT_TITLE\" | tr -cd '[:alnum:] _-' | tr ' ' '_')\n  OUTPUT_FILE=\"$EXPORT_DIR/${SAFE_TITLE}_${TIMESTAMP}.$FORMAT\"\n\n  echo -e \"${CYAN}Processing chat export...${NC}\"\n  case \"$FORMAT\" in\n    md)\n      export_markdown \"$TMP_FILE\" \"$OU",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_113849.txt",
    "chunk_id": "27d703671f2d_114",
    "start_char": 205200,
    "end_char": 207200,
    "created_at": "2025-05-21T06:08:50+00:00"
  }
}