{
  "content": "dir in \"$PYTHON_DIR\" \"$CHUNKS_DIR\" \"$SUMMARIES_DIR\" \"$PROMPTS_DIR\"; do\n  if [[ ! -d \"$dir\" ]]; then\n    echo -e \"${YELLOW}Creating missing directory:${NC} $dir\"\n    mkdir -p \"$dir\"\n  fi\ndone\n\n# Ensure we have at least a fallback prompt template\nif [[ ! -f \"$DEFAULT_TEMPLATE\" ]]; then\n  echo -e \"${YELLOW}Creating fallback template at:${NC} $DEFAULT_TEMPLATE\"\n  mkdir -p \"$(dirname \"$DEFAULT_TEMPLATE\")\"\n  cat > \"$DEFAULT_TEMPLATE\" <<'EOL'\n# {title}\n\n## Context Information\n{summaries}\n\n## Tasks\n1. High‑level overview  \n2. Key insights  \n3. Issues / risks  \n4. Recommended next steps  \nEOL\nfi\n\n# ───────────────────────────────────────────────────────────\n# 5.  STEP 1 – Chunk files\n# ───────────────────────────────────────────────────────────\necho -e \"${BLUE}Step 1 • Checking for chunks…${NC}\"\nchunk_count=$(find \"$CHUNKS_DIR\" -type f -name \"*.json\" | wc -l)\n\nif [[ \"$chunk_count\" -eq 0 ]]; then\n  echo -e \"${YELLOW}No chunks found in ${CHUNKS_DIR}${NC}\"\n  read -rp \"$(echo -e \"${BLUE}Create chunks from a source file? (y/n) ${NC}\")\" create_chunks\n  if [[ \"$create_chunks\" =~ ^[Yy]$ ]]; then\n    read -rp \"$(echo -e \"${BLUE}Path to source file: ${NC}\")\" source_file\n    [[ -f \"$source_file\" ]] || { echo -e \"${RED}Source file not found${NC}\"; exit 1; }\n\n    echo -e \"${BLUE}Choose chunk size:${NC}\n    1)  500 chars  (code/very technical)\n    2) 2000 chars  (balanced)   [default]\n    3) 4000 chars  (narrative)\\n\"\n    read -rp \"Selection: \" sz\n    case \"$sz\" in\n      1) chunk_size=500 ; overlap=50  ;;\n      3) chunk_size=4000; overlap=400 ;;\n      *) chunk_size=$DEFAULT_CHUNK_SIZE ; overlap=$DEFAULT_OVERLAP ;;\n    esac\n\n    echo -e \"${GREEN}→ Chunking with size $chunk_size / overlap $overlap…${NC}\"\n    python3 \"${PYTHON_DIR}/file_chunker.py\" \\\n        --input-file \"$source_file\" \\\n        --output-dir \"$CHUNKS_DIR\" \\\n        --chunk-size \"$chunk_size\" \\\n        --overlap \"$overlap\" \\\n        --verbose\n  else\n    echo -e \"${RED}No chunks – aborting workflow.${NC}\"\n    exit 0\n  fi\nfi\n\n#",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_113849.txt",
    "chunk_id": "27d703671f2d_33",
    "start_char": 59400,
    "end_char": 61400,
    "created_at": "2025-05-21T06:08:49+00:00"
  }
}