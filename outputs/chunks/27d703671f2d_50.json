{
  "content": "ib import Path\n\ndef chunk_file(input_file, output_dir, chunk_size=2000, overlap=200, verbose=False):\n    \"\"\"\n    Break down a file into overlapping chunks.\n    \n    Args:\n        input_file (str): Path to the input file\n        output_dir (str): Directory to save the chunks\n        chunk_size (int): Size of each chunk in characters\n        overlap (int): Overlap between chunks in characters\n        verbose (bool): Whether to print verbose output\n        \n    Returns:\n        int: Number of chunks created or -1 if error\n    \"\"\"\n    try:\n        # Ensure output directory exists\n        os.makedirs(output_dir, exist_ok=True)\n        \n        # Read the file content\n        with open(input_file, 'r', encoding='utf-8', errors='replace') as f:\n            content = f.read()\n            \n        if verbose:\n            print(f\"Read {len(content)} characters from {input_file}\")\n        \n        # Calculate file hash for chunk ID prefixes\n        file_hash = hashlib.md5(input_file.encode('utf-8')).hexdigest()\n        \n        # Break the content into chunks\n        chunks = []\n        position = 0\n        chunk_id = 0\n        \n        while position < len(content):\n            # Calculate chunk end position\n            end = min(position + chunk_size, len(content))\n            \n            # Create the chunk\n            chunk = {\n                \"id\": f\"{file_hash}_{chunk_id}\",\n                \"file\": input_file,\n                \"content\": content[position:end],\n                \"chunk_id\": chunk_id\n            }\n            chunks.append(chunk)\n            \n            # Move position for next chunk, considering overlap\n            position = end - overlap if end < len(content) else end\n            chunk_id += 1\n        \n        # Save chunks to files\n        for chunk in chunks:\n            output_file = os.path.join(output_dir, f\"{chunk['id']}.json\")\n            with open(output_file, 'w', encoding='utf-8') as f:\n                json.dump(chunk, f, indent=2)\n              ",
  "metadata": {
    "source": "/mnt/chromeos/removable/USB Drive/review_assistant/codebase/chat_sessions/Chat_with_CFO_20250521_113849.txt",
    "chunk_id": "27d703671f2d_50",
    "start_char": 90000,
    "end_char": 92000,
    "created_at": "2025-05-21T06:08:50+00:00"
  }
}